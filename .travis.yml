dist: xenial
services:
- postgresql
cache:
  bundler: true
  yarn: true
language: ruby
install:
- travis_retry nvm install 13.5.0
- bundle
- yarn
before_script:
- cp config/database.yml.travis config/database.yml
- rake db:setup
- RAILS_ENV=test bundle exec rails webpacker:compile
script:
- bundle exec rspec
- bundle exec rubocop --require rubocop-rails
deploy:
  provider: heroku
  api_key:
    secure: nQbcgOmXaZXUp/9VD6sPIPTSknTGr3pJbADyE1g0NJ6DW/k0ScvKHMRMiVnVQY/GrG8hmSC3YOj/CMyhh+MVZs2Kgy7ERA14U8mk3RubR6FuLNRe9CmjqC9QoxL8y7vp6f/qb/EC3F+2wJg+YtzaE1GhR28CvSy2SggliGSM3Dv8q3M7Vyl8px4AZDXX1RBx3Q7mbnZp7+w9klVWxad2wfdIwCAf7KldkaJ+rxliszjyxW/1xgnJ3GhF+tSEW4uiJKJmhorg9o29Sp+tiBc4lABUkovDMHl1WcxyeHLsHpc2V2ZjGwZUrBICQu4QKYF7XNMnOK7OM5hc6eoOpPantuLyFE00/TxF72iaf2W7cS9W5l4tyEqzA5Lk2X3iSRXN+/mHkCbyWnJ17GCU7vDV+gd4DNjJgns3MhkJQcr3gSK/b83Zv0CaHyq7r270n/4nseMWcN6CmM/UCW7RRzLKh1Txk0oTF26f+WmuQa/vq1clbQW4OW3y2OLjfHwGUgEwYRGkbosQGXAYQTnSS+uMdvoHbsnM+VQY54GqSSjFzwgyDP28qHrjhMy45Cv5ML/Lw9ThQcH5d61R7z855zsIsN1a0J+9PiLN4BP15cz0e4fuppkbPn8G1TconFJUuOKaWvOrXjGsLD8CgIinyq5OPeK+JFwRWW+si9RxnXWlx1c=
  app: paw-statistics
  before_deploy:
    - cp config/database.yml.heroku config/database.yml
    run:
    - rake db:migrate
    - rake cleanup
  on:
    repo: IF-107-Ruby/paw-statistics
    branch: refactoring
